# -----------------------------------------------------------------------
#
#  Tokiwa Software GmbH, Germany
#
#  Source code of Fuzion webserver feature global
#
# -----------------------------------------------------------------------

# effect for holding global state in the webserver
#
module global : effect is

  max_open_sessions => 1E3
  module sessions := lock_free.Sieve_Cache String Session max_open_sessions

  module feeds := Feeds

  max_cached_files => 25
  files := lock_free.Sieve_Cache path (outcome String) max_cached_files

  module read_file_as_string(p path) =>
    files.access p ()->
      util.read_file_as_string p
